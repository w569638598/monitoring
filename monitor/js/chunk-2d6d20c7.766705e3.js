(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d6d20c7"],{"0b25":function(t,a,e){"use strict";var i=e("fc41"),n=e.n(i);n.a},"618d":function(t,a,e){},6503:function(t,a,e){t.exports=e.p+"img/tips.d46d6c15.png"},cda9:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"left fl-l"},[i("div",[i("ul",t._l(t.leftNav,function(a,e){return i("li",{key:e,class:{active:t.active==e},on:{click:function(a){return t.navClick(e)}}},[t._v(t._s(a))])}),0)])]),i("div",{staticClass:"right fl-r"},[i("p",{staticClass:"r-title"},[t._v("报警信息")]),i("div",{staticClass:"selectOption"},[t._v("\n      筛选：\n      "),i("el-date-picker",{staticClass:"fl-l",staticStyle:{"margin-top":"6px"},attrs:{type:"date",placeholder:"开始时间","value-format":"yyyy-MM-dd"},model:{value:t.startDate,callback:function(a){t.startDate=a},expression:"startDate"}}),i("el-date-picker",{staticClass:"fl-l",staticStyle:{"margin-top":"6px"},attrs:{type:"date",placeholder:"结束时间日期","value-format":"yyyy-MM-dd"},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}}),i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择阅读状态"},model:{value:t.read,callback:function(a){t.read=a},expression:"read"}},t._l(t.readState,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"报警类型"},model:{value:t.warning,callback:function(a){t.warning=a},expression:"warning"}},t._l(t.warningState,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"选择倒序排列时间"},model:{value:t.sortDate,callback:function(a){t.sortDate=a},expression:"sortDate"}},t._l(t.sortDateState,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),i("el-input",{staticClass:"carNumber",attrs:{placeholder:"输入车牌号",clearable:""},model:{value:t.driverNumber,callback:function(a){t.driverNumber=a},expression:"driverNumber"}}),i("span",{staticStyle:{cursor:"pointer",color:"#4596db"},on:{click:t.operationSome}},[t._v("标记所选项为已读")]),i("span",{staticClass:"fl-r",staticStyle:{"font-size":"12px"}},[i("img",{staticStyle:{position:"relative",top:"4px"},attrs:{src:e("6503"),alt:"",width:"16px;",height:"16px;"}}),t._v("\n        共"+t._s(t.dataLength)+"条报警信息\n      ")])],1),i("router-view"),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",stripe:t.stripe,border:t.border},on:{"selection-change":t.handleSelectionChange,select:t.selectFn}},[i("el-table-column",{attrs:{type:"selection",width:"80"}}),i("el-table-column",{attrs:{label:"序号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.$index+1))]}}])}),i("el-table-column",{attrs:{prop:"platenum",label:"车牌号"}}),i("el-table-column",{attrs:{prop:"appointmentDate",label:"预约卸货时间"}}),i("el-table-column",{attrs:{prop:"mines",label:"预约矿点"}}),i("el-table-column",{attrs:{prop:"commandmsg",label:"报警类型"}}),i("el-table-column",{attrs:{prop:"eventtime",label:"报警时间"}}),i("el-table-column",{attrs:{prop:"hasRead",label:"状态",width:"120"}}),i("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return["已读"==a.row.hasRead?i("span"):i("span",{on:{click:function(e){return t.operationread(a.row,a.$index)}}},[t._v("标记为已读")]),i("span",{on:{click:function(e){return t.operationInfo(a.row)}}},[t._v("详情")])]}}])})],1),i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.currentPage,total:t.dataLength},on:{"current-change":t.getData}}),i("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"报警详情",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(a){t.dialogVisible=a}}},[i("div",{staticClass:"box"},[i("div",[i("p",{staticClass:"title"},[t._v("报警信息")]),i("div",[i("div",{staticClass:"row first"},[i("p",[i("span",[t._v("报警类型：")]),t._v(t._s(t.infoData.commandmsg)+"\n              ")]),i("p",[i("span",[t._v("报警位置：")]),i("a",{attrs:{href:"#"},on:{click:function(a){return t.openMap(t.infoData.lng,t.infoData.lat)}}},[t._v("点击查看")])])]),i("div",{staticClass:"row"},[i("p",[i("span",[t._v("报警时间：")]),t._v(t._s(t.infoData.eventtime)+"\n              ")]),i("p",[i("span",[t._v("标记状态：")]),t._v(t._s(t.infoData.hasRead)+"\n              ")])])])]),i("div",{staticClass:"type-two"},[i("p",{staticClass:"title"},[t._v("车辆信息")]),i("div",[i("div",{staticClass:"row first"},[i("p",[i("span",[t._v("车牌号：")]),t._v(t._s(t.infoData.platenum)+"\n              ")]),i("p",[i("span",[t._v("司机姓名：")]),t._v(t._s(t.infoData.appname)+"\n              ")])]),i("div",{staticClass:"row"},[i("p",[i("span",[t._v("手机号：")]),t._v(t._s(t.infoData.appmobile)+"\n              ")]),i("p",[i("span",[t._v("供应单位：")]),t._v(t._s(t.infoData.companyName)+"\n              ")])]),i("div",{staticClass:"row"},[i("p",[i("span",[t._v("货品名称：")]),t._v(t._s(t.infoData.appointmentProduct)+"\n              ")]),i("p",[i("span",[t._v("毛重（吨）：")]),t._v(t._s(t.infoData.rough)+"\n              ")])]),i("div",{staticClass:"row"},[i("p",[i("span",[t._v("预约卸货时间：")]),t._v(t._s(t.infoData.appointmentDate)+"\n              ")]),i("p",[i("span",[t._v("皮重（吨）：")]),t._v(t._s(t.infoData.tare)+"\n              ")])])])])])]),i("el-dialog",{staticStyle:{"text-align":"center"},attrs:{visible:t.isShow,title:"报警位置"},on:{"update:visible":function(a){t.isShow=a}}},[i("baidu-map",{staticClass:"map",class:{isShow:t.isShow},style:{width:t.width,height:t.height},attrs:{center:t.mapPoint,zoom:13,"scroll-wheel-zoom":!0}},[i("bm-marker",{attrs:{position:t.mapPoint}})],1)],1)],1)])},n=[],s=(e("ac6a"),e("2f62")),l={data:function(){return{pageSize:10,currentPage:0,dialogVisible:!1,stripe:!0,border:!0,dataLength:null,driverNumber:"",isShow:!1,mapPoint:{lat:0,lng:0},width:"100%",height:"500px",active:0,ids:[],infoData:[],idstr:"",leftNav:["报警信息","统计报表","路线偏离","断电报警","停车超时","温度过高","GPS故障","设置"],startDate:this.PF.getToDay(),endDate:this.PF.getToDay(),readState:[{label:"请选择阅读状态",value:2},{label:"已读",value:1},{label:"未读",value:0}],read:"",warningState:[{label:"请选择报警类型",value:0},{label:"路线偏离",value:9},{label:"停车超时",value:10},{label:"断电报警",value:2},{label:"温度过高",value:5},{label:"GPS故障",value:11}],warning:"",sortDateState:[{label:"请选择倒序排列时间",value:0},{label:"预约卸货时间",value:"appointmentdate"},{label:"报警时间",value:"eventtime"}],sortDate:"",tableData:[]}},computed:Object(s["c"])({_venderLoginId:function(t){return t._venderLoginId}}),methods:{operationSome:function(){this.operationread(this.ids.join(","))},selectFn:function(t,a){var e=this;t.forEach(function(t){e.ids.push(t.id)})},navClick:function(t){this.$message({message:"敬请期待",center:!0,duration:1e3})},operationread:function(t,a){var e,i=this;e=t.id?this.qs.stringify({ids:t.id}):this.qs.stringify({ids:t});this.ajax.post("monitorApi/updateWaring",e).then(function(t){200==t.data.errorCode&&i.getData()})},getData:function(t){var a=this;this.read=2===this.read?"":this.read,this.sortDate=0===this.sortDate?"":this.sortDate,this.warning=0===this.warning?"":this.warning;var e=this.qs.stringify({venderId:this._venderLoginId,hasRead:this.read,driverNumber:this.driverNumber,startDate:this.startDate,endDate:this.endDate,waringType:this.warning,sortBy:this.sortDate,pagesNo:t?t-1:0});this.ajax.post("monitorApi/getWaringList ",e).then(function(t){t.data.body.result.forEach(function(t){t.appointmentDate=t.appointmentDate?a.PF.parseDate(t.appointmentDate):"-",t.hasRead=t.hasRead?"已读":"未读"}),a.dataLength=t.data.body.size,a.tableData=t.data.body.result})},handleSelectionChange:function(){},operationInfo:function(t,a){this.dialogVisible=!0,this.infoData=t},openMap:function(t,a){console.log(t),"0.0"!=t?(this.isShow=!0,this.mapPoint={lng:t,lat:a}):alert("查询不到位置信息")}},watch:{startDate:function(){this.getData()},endDate:function(){this.getData()},read:function(){this.getData()},warning:function(){this.getData()},sortDate:function(){this.getData()},driverNumber:function(){this.getData()}},mounted:function(){this.getData()}},o=l,r=(e("0b25"),e("f6c8"),e("2877")),c=Object(r["a"])(o,i,n,!1,null,"bd2c308c",null);a["default"]=c.exports},f6c8:function(t,a,e){"use strict";var i=e("618d"),n=e.n(i);n.a},fc41:function(t,a,e){}}]);
//# sourceMappingURL=chunk-2d6d20c7.766705e3.js.map