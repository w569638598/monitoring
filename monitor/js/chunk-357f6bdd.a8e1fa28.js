(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-357f6bdd"],{"179e":function(t,e){t.exports="data:image/png;base64,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"},"5cb7":function(t,e,n){},"6cb1":function(t,e,n){"use strict";var i=n("fe5f0"),a=n.n(i);a.a},a8b8:function(t,e,n){"use strict";var i=n("5cb7"),a=n.n(i);a.a},a94d:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setMain"},[n("div",{staticClass:"nav"},[n("div",{staticClass:"line"}),n("ul",t._l(t.nav,function(e,i){return n("li",{key:i,class:{navActive:t.navIndex==i},on:{click:function(n){return t.tabFn(e,i)}}},[t._v(t._s(e))])}),0)]),n("div",{staticClass:"bd"},[0==t.navIndex?n("div",{staticClass:"miners"},[n("div",{staticClass:"top"},[n("span",{staticClass:"fl-r",on:{click:function(e){return t.addMinersAddress(!0)}}},[t._v("+新增矿点位置")])]),n("div",{staticClass:"tableBox"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",stripe:!0}},[n("el-table-column",{attrs:{label:"序号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1))]}}],null,!1,1428727577)}),n("el-table-column",{attrs:{prop:"mines",label:"矿点名称"}}),n("el-table-column",{attrs:{prop:"address",label:"矿点地址"}}),n("el-table-column",{attrs:{prop:"coord",label:"矿点坐标"}}),n("el-table-column",{attrs:{prop:"create_date",label:"创建时间"}}),n("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"editorBtn fc-g",on:{click:function(n){return t.addMinersAddress(!1,e.row)}}},[t._v("修改")]),n("span",{staticClass:"deleteBtn fc-r",on:{click:function(n){return t.deleteFn(e.row)}}},[t._v("删除")])]}}],null,!1,1202143507)})],1)],1)]):n("div",{staticClass:"manufactor"},[n("div",{staticClass:"setManufactorAddress"},[n("p",[t._v("设置厂家位置")]),n("baidu-map",{staticClass:"manufactormapBox",style:{width:t.width2,height:t.height2},attrs:{center:t.MPoint,zoom:13,"scroll-wheel-zoom":!0},on:{click:t.selectAddress}},[""!=t.MMarkP?n("bm-marker",{attrs:{position:t.MMarkP}}):t._e()],1),n("div",{staticClass:"addressinof"},[n("div",[n("span",[t._v("厂家名称：")]),n("span",{staticClass:"MAddress"},[t._v(t._s(t._globalVenderName))])]),n("div",[n("span",[t._v("百度坐标：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.MP,expression:"MP"}],staticClass:"baiduPosition",attrs:{type:"text"},domProps:{value:t.MP},on:{input:function(e){e.target.composing||(t.MP=e.target.value)}}})]),n("div",[n("span",[t._v("厂家位置：")]),n("span",{staticClass:"MAddress"},[t._v(t._s(t.MA))])]),n("input",{staticClass:"commitManufactorAddress",attrs:{type:"button",value:"确定"},on:{click:t.commitManufactorAddress}})])],1)])]),n("el-dialog",{staticStyle:{"text-align":"center"},attrs:{visible:t.isShow,title:"矿点位置"},on:{"update:visible":function(e){t.isShow=e},close:t.closeFn}},[n("baidu-map",{staticClass:"map",style:{width:t.width,height:t.height},attrs:{center:t.mapPoint,zoom:13,"scroll-wheel-zoom":!0},on:{ready:t.handler,click:t.minersMapEvent}},[n("bm-marker",{attrs:{position:t.minersP}})],1),n("div",{staticClass:"addressinof"},[n("div",[n("span",[t._v("矿点名称：")]),t.newAdd?n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.mineralname,callback:function(e){t.mineralname=e},expression:"mineralname"}},t._l(t.minersList,function(t,e){return n("el-option",{key:e,attrs:{label:t.mineralname,value:t.mineralname}})}),1):n("span",{staticClass:"MAddress"},[t._v(t._s(t.mineralname))])],1),n("div",[n("span",[t._v("百度坐标：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.minersMapPoint,expression:"minersMapPoint"}],staticClass:"baiduPosition",attrs:{type:"text"},domProps:{value:t.minersMapPoint},on:{input:function(e){e.target.composing||(t.minersMapPoint=e.target.value)}}})]),n("div",[n("span",[t._v("矿点位置：")]),n("span",{staticClass:"newAddPointEvent"},[t._v(t._s(t.minersA))])]),n("input",{staticClass:"commitManufactorAddress",attrs:{type:"button",value:"确定"},on:{click:t.newAddPointEvent}})])],1)],1)},a=[],s=(n("28a5"),n("2f62")),o=(n("179e"),{data:function(){return{tableData:[],nav:["矿点位置","厂家位置"],navIndex:0,isShow:!1,mapPoint:{lng:113.666486,lat:34.752728},width:"50%",height:"500px",width2:"50%",height2:"536px",startPoint:{lng:113,lat:43},endPoint:{lng:113,lat:43},MPoint:{lng:113.666486,lat:34.752728},MP:"",MA:"",MMarkP:"",newAdd:"",minersList:[],mineralname:"",minersP:"",minersA:"",minersMapPoint:"",_BMP:"",__BMP:""}},created:function(){this.getTabList(),this.getList()},computed:Object(s["c"])({_venderLoginId:function(t){return t._venderLoginId},_globalVenderName:function(t){return t.globalVenderName}}),watch:{MP:function(){console.log(this._BMP,this.__BMP);var t,e,n=this;"string"!==typeof this.MP&&(t=this.MP,e=this.MP.lat+","+this.MP.lng,this.MP=e);var i=new BMap.Geocoder,a=this.MP.split(",");t=new BMap.Point(a[1],a[0]),this.MMarkP=t,this.MPoint=t,i.getLocation(t,function(t){t.addressComponents;n.MA=t.address})},minersMapPoint:function(){var t=this;this.persePoint(this.minersMapPoint,function(e){t.minersA=e.address})}},methods:{handler:function(t){var e=t.BMap,n=t.map;console.log(e,n),this._BMP=e,this.__BMP=n,this.MPoint={lng:113.666486,lat:34.752728},this.mapPoint={lng:113.666486,lat:34.752728}},getTabList:function(){var t=this;this.ajax.post(this.PF.towAPIUrl+"/monitorApi/venderMinePositionList",{venderId:this._venderLoginId}).then(function(e){200==e.data.errorCode?t.tableData=e.data.body.list:t.$alert(e.data.msg)})},getList:function(){var t=this;this.ajax.post(this.PF.towAPIUrl+"/monitorApi/getMinesListByVenderId",{vendername:this._globalVenderName,status:"1",venderId:this._venderLoginId}).then(function(e){200==e.data.errorCode?t.minersList=e.data.body.list:t.$alert(e.data.msg)})},closeFn:function(){this.isShow=!1,this.mineralname="",this.minersMapPoint="",this.minersA="",this.MPoint={lng:113.666486,lat:34.752728},this.mapPoint={lng:113.666486,lat:34.752728}},deleteFn:function(t){var e=this;this.$confirm("确定删除此矿点位置信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.ajax.post(e.PF.towAPIUrl+"/monitorApi/deleteMinePosition",t).then(function(t){200==t.data.errorCode?(e.$alert("删除成功"),e.getTabList()):e.alert(t.data.msg)})}).catch(function(){})},newAddPointEvent:function(){var t=this;if(""!=this.minersMapPoint)if(""!=this.mineralname){var e={venderId:this._venderLoginId,venderName:this._globalVenderName,mine:this.mineralname,coord:this.minersMapPoint,address:this.minersA};this.ajax.post(this.PF.towAPIUrl+"/monitorApi/UpdateVenderMinePosition",e).then(function(e){200==e.data.errorCode?(t.$alert("成功"),t.getTabList(),t.minersMapPoint="",t.minersA="",t.isShow=!1):t.$alert(e.data.msg)})}else this.$alert("请选择矿点");else this.$alert("请输入位置")},persePoint:function(t,e){var n,i=new BMap.Geocoder;if("string"!==typeof t){n=t.lng+","+t.lat;var a=new BMap.Point(t.lng,t.lat)}else a=new BMap.Point(t.split(",")[0],t.split(",")[1]);this.minersP=a,this.mapPoint=a,i.getLocation(a,function(t){t.addressComponents;var i={pointStr:n,address:t.address};e(i)})},commitManufactorAddress:function(){var t=this;if(""!=this.MP){var e={venderId:this._venderLoginId,coord:this.MP,address:this.MA};this.ajax.post(this.PF.towAPIUrl+"/monitorApi/UpdateVenderPosition",e).then(function(e){200==e.data.body?t.$alert("成功"):t.$alert(e.data.msg)})}else this.$alert("请填写地址")},minersMapEvent:function(t){this.minersP=t.point,this.minersMapPoint=t.point.lng+","+t.point.lat;var e=this;this.persePoint(t.point,function(t){e.minersA=t.address})},selectAddress:function(t){this.MP=t.point},addMinersAddress:function(t,e){var n=this;this.newAdd=t,e&&(this.mineralname=e.mines,setTimeout(function(){var t={lng:e.coord.split(",")[0],lat:e.coord.split(",")[1]};n.MPoint=t,n.minersP=t,n.minersMapPoint=e.coord,n.minersA=e.address},80)),t&&(this.mapPoint={lng:113.666486,lat:34.752728}),this.isShow=!0},tabFn:function(t,e){var n=this;this.navIndex=e,1===e&&this.ajax.post(this.PF.towAPIUrl+"/monitorApi/checkVenderPositionHasExists",{venderId:this._venderLoginId}).then(function(t){200==t.data.errorCode&&(n.MP=t.data.body.info.coord,n.MA=t.data.body.info.address)})}}}),r=o,l=(n("a8b8"),n("6cb1"),n("2877")),d=Object(l["a"])(r,i,a,!1,null,"aaa32c5e",null);e["default"]=d.exports},fe5f0:function(t,e,n){}}]);
//# sourceMappingURL=chunk-357f6bdd.a8e1fa28.js.map