(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bfc80cb"],{"179e":function(t,e){t.exports="data:image/png;base64,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"},"5cb7":function(t,e,i){},a8b8:function(t,e,i){"use strict";var n=i("5cb7"),a=i.n(n);a.a},a94d:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setMain"},[i("div",{staticClass:"nav"},[i("div",{staticClass:"line"}),i("ul",t._l(t.nav,function(e,n){return i("li",{key:n,class:{navActive:t.navIndex==n},on:{click:function(i){return t.tabFn(e,n)}}},[t._v(t._s(e))])}),0)]),i("div",{staticClass:"bd"},[0==t.navIndex?i("div",{staticClass:"miners"},[i("div",{staticClass:"top"},[i("span",{staticClass:"fl-r",on:{click:function(e){return t.addMinersAddress(!0)}}},[t._v("+新增矿点位置")])]),i("div",{staticClass:"tableBox"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",stripe:!0}},[i("el-table-column",{attrs:{label:"序号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1))]}}],null,!1,1428727577)}),i("el-table-column",{attrs:{prop:"mines",label:"矿点名称"}}),i("el-table-column",{attrs:{prop:"address",label:"矿点地址"}}),i("el-table-column",{attrs:{prop:"coord",label:"矿点坐标"}}),i("el-table-column",{attrs:{prop:"create_date",label:"创建时间"}}),i("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"editorBtn fc-g",on:{click:function(i){return t.addMinersAddress(!1,e.row)}}},[t._v("修改")]),i("span",{staticClass:"deleteBtn fc-r",on:{click:function(i){return t.deleteFn(e.row)}}},[t._v("删除")])]}}],null,!1,1202143507)})],1)],1)]):i("div",{staticClass:"manufactor"},[i("div",{staticClass:"setManufactorAddress"},[i("p",[t._v("设置厂家位置")]),i("baidu-map",{staticClass:"manufactormapBox",style:{width:t.width2,height:t.height2},attrs:{center:t.MPoint,zoom:13,"scroll-wheel-zoom":!0},on:{click:t.selectAddress}},[""!=t.MMarkP?i("bm-marker",{attrs:{position:t.MMarkP}}):t._e()],1),i("div",{staticClass:"addressinof"},[i("div",[i("span",[t._v("厂家名称：")]),i("span",{staticClass:"MAddress"},[t._v(t._s(t._globalVenderName))])]),i("div",[i("span",[t._v("百度坐标：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.MP,expression:"MP"}],staticClass:"baiduPosition",attrs:{type:"text"},domProps:{value:t.MP},on:{input:function(e){e.target.composing||(t.MP=e.target.value)}}})]),i("div",[i("span",[t._v("厂家位置：")]),i("span",{staticClass:"MAddress"},[t._v(t._s(t.MA))])]),i("input",{staticClass:"commitManufactorAddress",attrs:{type:"button",value:"确定"},on:{click:t.commitManufactorAddress}})])],1)])]),i("el-dialog",{staticStyle:{"text-align":"center"},attrs:{visible:t.isShow,title:"矿点位置"},on:{"update:visible":function(e){t.isShow=e},close:t.closeFn}},[i("baidu-map",{staticClass:"map",style:{width:t.width,height:t.height},attrs:{center:t.mapPoint,zoom:13,"scroll-wheel-zoom":!0},on:{click:t.minersMapEvent}},[i("bm-marker",{attrs:{position:t.minersP}})],1),i("div",{staticClass:"addressinof"},[i("div",[i("span",[t._v("矿点名称：")]),t.newAdd?i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.mineralname,callback:function(e){t.mineralname=e},expression:"mineralname"}},t._l(t.minersList,function(t,e){return i("el-option",{key:e,attrs:{label:t.mineralname,value:t.mineralname}})}),1):i("span",{staticClass:"MAddress"},[t._v(t._s(t.mineralname))])],1),i("div",[i("span",[t._v("百度坐标：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.minersMapPoint,expression:"minersMapPoint"}],staticClass:"baiduPosition",attrs:{type:"text"},domProps:{value:t.minersMapPoint},on:{input:function(e){e.target.composing||(t.minersMapPoint=e.target.value)}}})]),i("div",[i("span",[t._v("矿点位置：")]),i("span",{staticClass:"newAddPointEvent"},[t._v(t._s(t.minersA))])]),i("input",{staticClass:"commitManufactorAddress",attrs:{type:"button",value:"确定"},on:{click:t.newAddPointEvent}})])],1)],1)},a=[],s=(i("28a5"),i("2f62")),o=(i("179e"),{data:function(){return{tableData:[],nav:["矿点位置","厂家位置"],navIndex:0,isShow:!1,mapPoint:{lng:113,lat:43},width:"50%",height:"500px",width2:"50%",height2:"536px",startPoint:{lng:113,lat:43},endPoint:{lng:113,lat:43},MPoint:{lng:113,lat:36},MP:"",MA:"",MMarkP:"",newAdd:"",minersList:[],mineralname:"",minersP:"",minersA:"",minersMapPoint:""}},created:function(){var t=this;this.getTabList(),this.getList(),this.ajax.post(this.PF.towAPIUrl+"/monitorApi/checkVenderPositionHasExists",{venderId:this._venderLoginId}).then(function(e){200==e.data.errorCode&&(t.MP=e.data.body.info.coord,t.MA=e.data.body.info.address)})},computed:Object(s["c"])({_venderLoginId:function(t){return t._venderLoginId},_globalVenderName:function(t){return t.globalVenderName}}),watch:{MP:function(){var t,e,i=this;"string"!==typeof this.MP&&(t=this.MP,e=this.MP.lng+","+this.MP.lat,this.MP=e);var n=new BMap.Geocoder,a=this.MP.split(",");t=new BMap.Point(a[0],a[1]),this.MMarkP=t,this.MPoint=t,n.getLocation(t,function(t){t.addressComponents;i.MA=t.address})},minersMapPoint:function(){var t=this;this.persePoint(this.minersMapPoint,function(e){t.minersA=e.address})}},methods:{getTabList:function(){var t=this;this.ajax.post(this.PF.towAPIUrl+"/monitorApi/venderMinePositionList",{venderId:this._venderLoginId}).then(function(e){200==e.data.errorCode?t.tableData=e.data.body.list:t.$alert(e.data.msg)})},getList:function(){var t=this;this.ajax.post(this.PF.towAPIUrl+"/monitorApi/getMinesListByVenderId",{vendername:this._globalVenderName,status:"1"}).then(function(e){console.log(0),200==e.data.errorCode?t.minersList=e.data.body.list:t.$alert(e.data.msg)})},closeFn:function(){this.mineralname="",this.minersMapPoint="",this.minersA=""},deleteFn:function(t){var e=this;this.$confirm("确定删除此矿点位置信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.ajax.post(e.PF.towAPIUrl+"/monitorApi/deleteMinePosition",t).then(function(t){200==t.data.errorCode?(e.$alert("删除成功"),e.getTabList()):e.alert(t.data.msg)})}).catch(function(){})},newAddPointEvent:function(){var t=this;if(""!=this.minersMapPoint)if(""!=this.mineralname){var e={venderId:this._venderLoginId,venderName:this._globalVenderName,mine:this.mineralname,coord:this.minersMapPoint,address:this.minersA};this.ajax.post(this.PF.towAPIUrl+"/monitorApi/UpdateVenderMinePosition",e).then(function(e){200==e.data.errorCode?(t.$alert("成功"),t.getTabList(),t.minersMapPoint="",t.minersA="",t.isShow=!1):t.$alert(e.data.msg)})}else this.$alert("请选择矿点");else this.$alert("请输入位置")},persePoint:function(t,e){var i,n=new BMap.Geocoder;if("string"!==typeof t){i=t.lng+","+t.lat;var a=new BMap.Point(t.lng,t.lat)}else a=new BMap.Point(t.split(",")[0],t.split(",")[1]);this.minersP=a,this.mapPoint=a,n.getLocation(a,function(t){t.addressComponents;var n={pointStr:i,address:t.address};e(n)})},commitManufactorAddress:function(){var t=this;if(""!=this.MP){var e={venderId:this._venderLoginId,coord:this.MP,address:this.MA};this.ajax.post(this.PF.towAPIUrl+"/monitorApi/UpdateVenderPosition",e).then(function(e){200==e.data.body?t.$alert("成功"):t.$alert(e.data.msg)})}else this.$alert("请填写地址")},minersMapEvent:function(t){this.minersP=t.point,this.minersMapPoint=t.point.lng+","+t.point.lat;var e=this;this.persePoint(t.point,function(t){e.minersA=t.address})},selectAddress:function(t){this.MP=t.point},addMinersAddress:function(t,e){if(this.newAdd=t,t)this.mapPoint={lng:113,lat:43};else{this.mineralname=e.mines;var i={lng:e.coord.split(",")[0],lat:e.coord.split(",")[1]};this.MPoint=i,this.minersP=i,this.minersMapPoint=e.coord}this.isShow=!0},tabFn:function(t,e){this.navIndex=e}}}),r=o,l=(i("a8b8"),i("fcb0"),i("2877")),d=Object(l["a"])(r,n,a,!1,null,"0b7d2af0",null);e["default"]=d.exports},f131:function(t,e,i){},fcb0:function(t,e,i){"use strict";var n=i("f131"),a=i.n(n);a.a}}]);
//# sourceMappingURL=chunk-4bfc80cb.5dcb0dd9.js.map